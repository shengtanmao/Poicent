\documentclass[11pt]{article}
\usepackage{latexsym}
\usepackage{amsmath,amssymb,amsthm}
\usepackage{epsfig}
\usepackage[right=0.8in, top=1in, bottom=1.2in, left=0.8in]{geometry}
\usepackage{setspace}
\spacing{1.06}

\newcommand{\handout}[5]{
  \noindent
  \begin{center}
  \framebox{
    \vbox{\vspace{0.25cm}
      \hbox to 5.78in { {COMS 4115:\hspace{0.12cm}Programming Languages and Translators} \hfill #2 }
      \vspace{0.48cm}
      \hbox to 5.78in { {\Large \hfill #5  \hfill} }
      \vspace{0.42cm}
      \hbox to 5.78in { {#3 \hfill #4} }\vspace{0.25cm}
    }
  }
  \end{center}
  \vspace*{4mm}
}

\newcommand{\lecture}[4]{\handout{#1}{#2}{#3}{\hspace{0.08cm}#4}{#1}}

\newtheorem{theorem}{Theorem}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{observation}[theorem]{Observation}
\newtheorem{example}[theorem]{Example}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{assumption}[theorem]{Assumption}

\newcommand{\E}{{\mathbb E}}
\DeclareMathOperator{\var}{Var}

\usepackage{fancyvrb}
\fvset{tabsize=4}

\begin{document}

\lecture{Poicent Proposal}{Fall 2021}{microc with pointers}{Shengtan Mao (sm4954)}

\section{Introduction}
Pointers are powerful tools in C.
They offer a much greater level of control.
Microc is a minimalized version of the C language, which currently does not have support for pointers.
The goal of this project is to add support for pointers and related operations, which include pointer types, referencing, dereferncing, pointer arrays, and pointer arithmetic.

\section{Basics}
The basic support for pointers include pointer types, referencing, and dereferncing.
A pointer type stores the memory address of a variable of the specified type.
In declarations, adding $*$ before the name will make it a pointer of the declared type.
An integer pointer, for example, stores a memory address of an integer variable.
This is how an integer pointer would be declared.
\begin{Verbatim}
 	int *p;
\end{Verbatim}

Referencing is when one retrieves the memory address of an variable.
Given an integer variable, we can retrieve the memory address of the variable using $\&$ and store it in the integer pointer.
\begin{Verbatim}
	int *p;
	int i;
	i = 3;
	p = &i;
\end{Verbatim}

Dereferencing is when one retrieves the value of the variable of the memory address.
Given an interger pointer, we can retrieve the integer value of the variable it points to using $*$.
\begin{Verbatim}
	int *p;
	int i;
	i = 3;
	p = &i;
	return *p; /* returns 3 */
\end{Verbatim}

Functions can also take pointers as arguments and return pointers. 
Here is a simple add function that takes the pointers of the addends and the result and returns the pointer of the result.
\begin{Verbatim}
	int* add(int* a, int* b, int* res)
	{
		*res = *a + *b;
		return res;
	}
\end{Verbatim}

\section{Pointer Arrays}
Pointer arrays are arrays stored in the heap.
The allocation and deallocation will be done using the functions $malloc(\text{bytes to allocate})$ and $free(\text{pointer})$.
Its elements could be accessed using $\text{pointer}[\text{index offset}]$ or dereferencing a pointer.
The values of unintialized elements are arbitrary.
\begin{Verbatim}
	int *a;
	int i;
	int j;
	a = malloc(2*4); /* allocates 8 bytes for 2 4-byte integers */
	a[0] = 1;
	a[1] = 2;
	i = a[1];
	j = *a;
	free(a);
	return i + j; /* returns 3 */
\end{Verbatim}

\section{Pointer Arithmetic}
Pointers can be incremented and decremented with $++$ and $--$; they could be placed before or after the name to indicate if the operation should take place before or after the expression is evaluated.
Each increment or decrement aligns the address based on the type it is a pointer of.
Pointers can also be compared.
\begin{Verbatim}
	int *a;
	int *b;
	int i;
	a = malloc(2*4);
	a[0] = 1;
	a[1] = 2;
	b = a;
	if (a < ++b)
		i = *b;
	else
		i = *a;
	free(a);
	return i; /* returns 2 */
\end{Verbatim}
\end{document}
